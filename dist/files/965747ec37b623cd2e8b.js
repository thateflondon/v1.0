window.SVG3DTagCloud=function(t,e){function i(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=e,r=i;u.width.toString().indexOf("%")>0||u.height.toString().indexOf("%")>0?(o=Math.round(t.offsetWidth/100*parseInt(u.width)),r=Math.round(o/100*parseInt(u.height))):(o=parseInt(u.width),r=parseInt(u.height)),o>=e&&(o=e),r>=i&&(r=i),h={x:o/2,y:r/2},x.x=u.speed/h.x,x.y=u.speed/h.y,1>(d=o>=r?r/100*parseInt(u.radius):o/100*parseInt(u.radius))&&(d=1),(l=d/2)<u.radiusMin&&(l=u.radiusMin,d=2*l),f.setAttribute("width",o),f.setAttribute("height",r),u.bgDraw&&(v.setAttribute("width",o),v.setAttribute("height",r)),n(l)}function n(t){for(var e=0,i=m.length;i>e;e++)o(m[e],t)}function o(t,e){var i=t.vectorPosition.x-g.x,n=t.vectorPosition.y-g.y,o=t.vectorPosition.z-g.z,r=Math.sqrt(i*i+n*n+o*o);t.vectorPosition.x/=r,t.vectorPosition.y/=r,t.vectorPosition.z/=r,t.vectorPosition.x*=e,t.vectorPosition.y*=e,t.vectorPosition.z*=e}function r(t,e,i,n,o){var r={};return r.element=document.createElementNS(A,"text"),r.element.setAttribute("x",0),r.element.setAttribute("y",0),r.element.setAttribute("fill",u.fontColor),r.element.setAttribute("font-family",u.fontFamily),r.element.setAttribute("font-size",u.fontSize),r.element.setAttribute("font-weight",u.fontWeight),r.element.setAttribute("font-style",u.fontStyle),r.element.setAttribute("font-stretch",u.fontStretch),r.element.setAttribute("text-anchor","middle"),r.element.textContent=u.fontToUpperCase?e.label.toUpperCase():e.label,r.link=document.createElementNS(A,"a"),r.link.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.url),r.link.setAttribute("target",e.target),r.link.addEventListener("mouseover",s,!0),r.link.addEventListener("mouseout",a,!0),r.link.appendChild(r.element),r.index=t,r.mouseOver=!1,r.vectorPosition={x:i,y:n,z:o},r.vector2D={x:0,y:0},f.appendChild(r.link),r}function s(t){y=!1,function(t){for(var e=function(t){for(var e=0,i=m.length;i>e;e++){var n=m[e];if(n.element.getAttribute("x")===t.getAttribute("x")&&n.element.getAttribute("y")===t.getAttribute("y"))return n}}(t),i=0,n=m.length;n>i;i++){var o=m[i];o.index===e.index?o.mouseOver=!0:o.mouseOver=!1}}(t.target)}function a(t){y=!0}var u={entries:[],width:480,height:480,radius:"70%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:2,fontFamily:"Arial, sans-serif",fontSize:"15",fontColor:"#fff",fontWeight:"normal",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!1};if(void 0!==e)for(var c in e)e.hasOwnProperty(c)&&u.hasOwnProperty(c)&&(u[c]=e[c]);if(!u.entries.length)return!1;var l,d,h,f,v,m=[],y=!0,p={x:0,y:0},g={x:0,y:0,z:0},x={x:0,y:0},w={sx:0,cx:0,sy:0,cy:0},b=Math.PI/180,A="http://www.w3.org/2000/svg";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},(f=document.createElementNS(A,"svg")).addEventListener("mousemove",function(t){p=function(t,e){var i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}(f,t)}),t.appendChild(f),u.bgDraw&&((v=document.createElementNS(A,"rect")).setAttribute("x",0),v.setAttribute("y",0),v.setAttribute("fill",u.bgColor),f.appendChild(v)),function(){for(var t=1,e=u.entries.length+1;e>t;t++){var i=Math.acos((2*t-1)/e-1),n=Math.sqrt(e*Math.PI)*i,o=Math.cos(n)*Math.sin(i),s=Math.sin(n)*Math.sin(i),a=Math.cos(i),c=r(t-1,u.entries[t-1],o,s,a);m.push(c)}}(),i(),function t(){requestAnimFrame(t),function(){var t=x.x*p.x-u.speed,e=u.speed-x.y*p.y,i=t*b,n=e*b;w.sx=Math.sin(i),w.cx=Math.cos(i),w.sy=Math.sin(n),w.cy=Math.cos(n);for(var o=0,r=m.length;r>o;o++){var s=m[o];if(y){var a=s.vectorPosition.x,c=s.vectorPosition.y*w.sy+s.vectorPosition.z*w.cy;s.vectorPosition.x=a*w.cx+c*w.sx,s.vectorPosition.y=s.vectorPosition.y*w.cy+s.vectorPosition.z*-w.sy,s.vectorPosition.z=a*-w.sx+c*w.cx}var f,v=u.fov/(u.fov+s.vectorPosition.z);s.vector2D.x=s.vectorPosition.x*v+h.x,s.vector2D.y=s.vectorPosition.y*v+h.y,s.element.setAttribute("x",s.vector2D.x),s.element.setAttribute("y",s.vector2D.y),y?(f=(l-s.vectorPosition.z)/d)<u.opacityOut&&(f=u.opacityOut):(f=parseFloat(s.element.getAttribute("opacity")),f+=s.mouseOver?(u.opacityOver-f)/u.opacitySpeed:(u.opacityOut-f)/u.opacitySpeed),s.element.setAttribute("opacity",f)}m=m.sort(function(t,e){return e.vectorPosition.z-t.vectorPosition.z})}()}(),window.addEventListener("resize",function(t){i()})},"undefined"!=typeof jQuery&&function(t){t.fn.svg3DTagCloud=function(e){return this.each(function(){t.data(this,"plugin_SVG3DTagCloud")||t.data(this,"plugin_SVG3DTagCloud",new SVG3DTagCloud(this,e))})}}(jQuery);